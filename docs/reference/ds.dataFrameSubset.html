<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Sub-sets data frames in the server-side — ds.dataFrameSubset • dsBaseClient</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Sub-sets data frames in the server-side — ds.dataFrameSubset" />
<meta property="og:description" content="Subsets a data frame by rows and/or by columns." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dsBaseClient</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">6.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Sub-sets data frames in the server-side</h1>
    
    <div class="hidden name"><code>ds.dataFrameSubset.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Subsets a data frame by rows and/or by columns.</p>
    </div>

    <pre class="usage"><span class='fu'>ds.dataFrameSubset</span>(
  df.name = <span class='kw'>NULL</span>,
  V1.name = <span class='kw'>NULL</span>,
  V2.name = <span class='kw'>NULL</span>,
  Boolean.operator = <span class='kw'>NULL</span>,
  keep.cols = <span class='kw'>NULL</span>,
  rm.cols = <span class='kw'>NULL</span>,
  keep.NAs = <span class='kw'>NULL</span>,
  newobj = <span class='kw'>NULL</span>,
  datasources = <span class='kw'>NULL</span>,
  notify.of.progress = <span class='fl'>FALSE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df.name</th>
      <td><p>a character string providing the name of the data frame to be subseted.</p></td>
    </tr>
    <tr>
      <th>V1.name</th>
      <td><p>A character string specifying the name of the vector 
to which the Boolean operator is to be applied to define the subset.
For more information see details.</p></td>
    </tr>
    <tr>
      <th>V2.name</th>
      <td><p>A character string specifying the name of the vector to compare 
with <code>V1.name</code>.</p></td>
    </tr>
    <tr>
      <th>Boolean.operator</th>
      <td><p>A character string specifying one of six possible Boolean operators:
<code>'==', '!=', '&gt;', '&gt;=', '&lt;'</code> and <code>'&lt;='</code>.</p></td>
    </tr>
    <tr>
      <th>keep.cols</th>
      <td><p>a numeric vector specifying the numbers of the columns to be kept in the
final subset.</p></td>
    </tr>
    <tr>
      <th>rm.cols</th>
      <td><p>a numeric vector specifying the numbers of the columns to be removed from 
the final subset.</p></td>
    </tr>
    <tr>
      <th>keep.NAs</th>
      <td><p>logical, if TRUE the missing values are included in the subset. 
If FALSE or NULL all rows with at least one missing values are removed from the subset.</p></td>
    </tr>
    <tr>
      <th>newobj</th>
      <td><p>a character string that provides the name for the output 
object that is stored on the data servers. Default <code>dataframesubset.newobj</code>.</p></td>
    </tr>
    <tr>
      <th>datasources</th>
      <td><p>a list of <code><a href='https://rdrr.io/pkg/DSI/man/DSConnection-class.html'>DSConnection-class</a></code> objects obtained after login.
If the <code>datasources</code>
the default set of connections will be used: see <code><a href='https://rdrr.io/pkg/DSI/man/datashield.connections_default.html'>datashield.connections_default</a></code>.</p></td>
    </tr>
    <tr>
      <th>notify.of.progress</th>
      <td><p>specifies if console output should be produced to indicate
progress. Default FALSE.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>ds.dataFrameSubset</code> returns
the object specified by the <code>newobj</code> argument
which is written to the server-side. 
Also, two validity messages are returned to the client-side indicating
the name of the <code>newobj</code> which has been created in each data source
 and if it is in a valid form.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Subset a pre-existing data frame using the standard 
set of Boolean operators (<code>==, !=, &gt;, &gt;=, &lt;, &lt;=</code>). 
The  subsetting is made by rows, but it is also possible to select
columns to keep or remove. Instead, if you
wish to keep all rows in the subset (e.g. if the primary plan is to subset by columns
and not by rows) the <code>V1.name</code> and <code>V2.name</code> parameters can be used 
to specify a vector of the same length
as the data frame to be subsetted in each study in which every element is 1 and 
there are no missing values. For more information see the example 2 below.</p>
<p>Server functions called: <code>dataFrameSubsetDS1</code> and <code>dataFrameSubsetDS2</code></p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>DataSHIELD Development Team</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>if</span> (<span class='fl'>FALSE</span>) {

 <span class='co'>## Version 6, for version 5 see the Wiki</span>
  
  <span class='co'># connecting to the Opal servers</span>

  <span class='fu'><a href='https://rdrr.io/r/base/library.html'>require</a></span>(<span class='st'><a href='https://github.com/datashield/DSI'>'DSI'</a></span>)
  <span class='fu'><a href='https://rdrr.io/r/base/library.html'>require</a></span>(<span class='st'><a href='https://www.obiba.org'>'DSOpal'</a></span>)
  <span class='fu'><a href='https://rdrr.io/r/base/library.html'>require</a></span>(<span class='st'>'dsBaseClient'</span>)

  <span class='kw'>builder</span> <span class='op'>&lt;-</span> <span class='kw'>DSI</span>::<span class='fu'><a href='https://rdrr.io/pkg/DSI/man/newDSLoginBuilder.html'>newDSLoginBuilder</a></span>()
  <span class='kw'>builder</span><span class='op'>$</span><span class='fu'><a href='https://rdrr.io/r/base/append.html'>append</a></span>(server = <span class='st'>"study1"</span>, 
                 url = <span class='st'>"http://192.168.56.100:8080/"</span>, 
                 user = <span class='st'>"administrator"</span>, password = <span class='st'>"datashield_test&amp;"</span>, 
                 table = <span class='st'>"CNSIM.CNSIM1"</span>, driver = <span class='st'>"OpalDriver"</span>)
  <span class='kw'>builder</span><span class='op'>$</span><span class='fu'><a href='https://rdrr.io/r/base/append.html'>append</a></span>(server = <span class='st'>"study2"</span>, 
                 url = <span class='st'>"http://192.168.56.100:8080/"</span>, 
                 user = <span class='st'>"administrator"</span>, password = <span class='st'>"datashield_test&amp;"</span>, 
                 table = <span class='st'>"CNSIM.CNSIM2"</span>, driver = <span class='st'>"OpalDriver"</span>)
  <span class='kw'>builder</span><span class='op'>$</span><span class='fu'><a href='https://rdrr.io/r/base/append.html'>append</a></span>(server = <span class='st'>"study3"</span>,
                 url = <span class='st'>"http://192.168.56.100:8080/"</span>, 
                 user = <span class='st'>"administrator"</span>, password = <span class='st'>"datashield_test&amp;"</span>, 
                 table = <span class='st'>"CNSIM.CNSIM3"</span>, driver = <span class='st'>"OpalDriver"</span>)
  <span class='kw'>logindata</span> <span class='op'>&lt;-</span> <span class='kw'>builder</span><span class='op'>$</span><span class='fu'><a href='https://rdrr.io/r/utils/PkgUtils.html'>build</a></span>()
  
  <span class='kw'>connections</span> <span class='op'>&lt;-</span> <span class='kw'>DSI</span>::<span class='fu'><a href='https://rdrr.io/pkg/DSI/man/datashield.login.html'>datashield.login</a></span>(logins = <span class='kw'>logindata</span>, assign = <span class='fl'>TRUE</span>, symbol = <span class='st'>"D"</span>) 
  
  <span class='co'># Subsetting a data frame</span>
  <span class='co'>#Example 1: Include some rows and all columns in the subset</span>
  <span class='fu'>ds.dataFrameSubset</span>(df.name = <span class='st'>"D"</span>,
                     V1.name = <span class='st'>"D$LAB_TSC"</span>,
                     V2.name = <span class='st'>"D$LAB_TRIG"</span>,
                     Boolean.operator = <span class='st'>"&gt;"</span>,
                     keep.cols = <span class='kw'>NULL</span>, <span class='co'>#All columns are included in the new subset</span>
                     rm.cols = <span class='kw'>NULL</span>, <span class='co'>#All columns are included in the new subset</span>
                     keep.NAs = <span class='fl'>FALSE</span>, <span class='co'>#All rows with NAs are removed</span>
                     newobj = <span class='st'>"new.subset"</span>,
                     datasources = <span class='kw'>connections</span>[<span class='fl'>1</span>],<span class='co'>#only the first server is used ("study1")</span>
                     notify.of.progress = <span class='fl'>FALSE</span>)
  <span class='co'>#Example 2: Include all rows and some columns in the new subset</span>
    <span class='co'>#Select complete cases (rows without NA)</span>
    <span class='fu'><a href='ds.completeCases.html'>ds.completeCases</a></span>(x1 = <span class='st'>"D"</span>,
                     newobj = <span class='st'>"complet"</span>,
                     datasources = <span class='kw'>connections</span>)
    <span class='co'>#Create a vector with all ones</span>
    <span class='fu'><a href='ds.make.html'>ds.make</a></span>(toAssign = <span class='st'>"complet$LAB_TSC-complet$LAB_TSC+1"</span>,
            newobj = <span class='st'>"ONES"</span>,
            datasources = <span class='kw'>connections</span>) 
    <span class='co'>#Subset the data</span>
    <span class='fu'>ds.dataFrameSubset</span>(df.name = <span class='st'>"complet"</span>,
                       V1.name = <span class='st'>"ONES"</span>,
                       V2.name = <span class='st'>"ONES"</span>,
                       Boolean.operator = <span class='st'>"=="</span>,
                       keep.cols = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>,<span class='fl'>10</span>), <span class='co'>#only columns 1, 2, 3, 4 and 10 are selected</span>
                       rm.cols = <span class='kw'>NULL</span>,
                       keep.NAs = <span class='fl'>FALSE</span>,
                       newobj = <span class='st'>"subset.all.rows"</span>,
                       datasources = <span class='kw'>connections</span>, <span class='co'>#all servers are used</span>
                       notify.of.progress = <span class='fl'>FALSE</span>)                
                     
  <span class='co'># Clear the Datashield R sessions and logout                 </span>
  <span class='fu'><a href='https://rdrr.io/pkg/DSI/man/datashield.logout.html'>datashield.logout</a></span>(<span class='kw'>connections</span>) 
  
}   
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by DataSHIELD Developers.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


